<?php/** * Hospital Web * * @category   Hospital * @package    Hospital * @author     heyx <heyx@pku.edu.cn> * @license    http://www.apache.org/licenses/LICENSE-2.0 * @version    $1.0 *//** * @package Hospital */class RemoteAction extends ServerAction{		////////////////////////////////////////////////////////////////////////////////////////////////	// Remote api methods		/**	 * ---------------------------------------------------------------------------------------------	 * > 接口说明：接受远端请求	 * <code>	 * URL地址：/Remote/index	 * 提交方式：POST	 * 参数#1：hosp_id， 类型：INT，必须：YES，示例：1	 * 参数#2：timestamp，类型：INT，必须：YES	 * 参数#3：signature，类型：STRING，必须：YES	 * 参数#4：type， 类型：INT，必须：YES，示例：1	 * </code>	 * ---------------------------------------------------------------------------------------------	 * @title 接受远端请求接口	 * @action /Remote/index	 * @params hosp_id	 * @params timestamp  	 * @params signature 	 * @params type 1表示医保数据查询	 * @method post	 */	public function index()	{		$this->doAuthRemote($this->_param('hosp_id'),$this->_param('timestamp'),$this->_param('signature'));		if ($this->_param('type') == 1) {			$condition['hosp_id'] = $this->_param('hosp_id');			$condition['patient_id'] = $this->_param('patient_id');			$condition['id_no'] = $this->_param('id_no');			$condition['admission_date_time'] = array('egt',$this->_param('admission_date_time'));			$chargeList = M('medicare_charge')->where($condition)->order('admission_date_time DESC')->select();			$this->render(0,"查询成功",$chargeList);		}else{			$this->render(-1,"操作类型不存在");		}					}}?>